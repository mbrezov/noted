"use client";
import { useState } from "react";
import styles from "./NoteCard.module.scss";

const NoteCard = (props: any) => {
  const [prefix, setPrefix] = useState("Poštovani gospodine XXXXX,");
  const [prefixOn, setPrefixOn] = useState(false);
  const [selected, setSelected] = useState(false);

  const copyContent = () => {
    const textToCopy = `${prefix}\n${props.content}`;
    navigator.clipboard.writeText(textToCopy);
  };

  const prefixChange = () => {
    if (prefixOn) {
      setPrefix("Poštovani gospodine XXXXX,");
      setPrefixOn(false);
    } else {
      setPrefix("Poštovana gospođo XXXXX,");
      setPrefixOn(true);
    }
  };

  const noPrefix = () => {
    setPrefix("");
  };

  const handleSelected = () => {
    setSelected((prevState) => !prevState);
  };

  return (
    <div className={`${styles.notecard} ${selected ? styles.selected : ""}`}>
      <div className={styles.background}></div>
      <div className={styles.title}>{props.title}</div>
      <button className={styles.copy_button} onClick={copyContent}>
        <div>
          <p>copy</p>
          <p className={styles.copy_icon}>c</p>
        </div>
      </button>
      <button className={styles.select_button} onClick={handleSelected}>
        {selected ? (
          <div>
            <p>minimize</p>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
            >
              <g clipPath="url(#clip0_60_8)">
                <path
                  d="M10.5 12C10.8729 12 11.2324 12.1389 11.5084 12.3896C11.7845 12.6403 11.9572 12.9848 11.993 13.356L12 13.5V18.5C11.9998 18.8852 11.8514 19.2556 11.5856 19.5344C11.3198 19.8132 10.9569 19.979 10.5721 19.9975C10.1873 20.016 9.81018 19.8858 9.51881 19.6338C9.22744 19.3818 9.04418 19.0274 9.00701 18.644L9.00001 18.5V17.121L5.06001 21.061C4.78823 21.3338 4.42196 21.4916 4.03703 21.5017C3.65211 21.5119 3.27802 21.3736 2.99222 21.1156C2.70642 20.8575 2.5308 20.4995 2.50172 20.1155C2.47264 19.7316 2.59233 19.3511 2.83601 19.053L2.93901 18.939L6.88001 15H5.50001C5.1148 14.9998 4.74442 14.8514 4.46563 14.5856C4.18683 14.3197 4.021 13.9568 4.00249 13.5721C3.98398 13.1873 4.1142 12.8102 4.36619 12.5188C4.61817 12.2274 4.97259 12.0442 5.35601 12.007L5.50001 12H10.5ZM18.94 2.93999C19.2121 2.66913 19.5777 2.51293 19.9615 2.50353C20.3453 2.49414 20.7181 2.63227 21.0032 2.88949C21.2882 3.1467 21.4637 3.50342 21.4937 3.88618C21.5236 4.26894 21.4056 4.6486 21.164 4.94699L21.061 5.06099L17.12 8.99999H18.5C18.8852 9.00018 19.2556 9.14856 19.5344 9.4144C19.8132 9.68023 19.979 10.0431 19.9975 10.4279C20.016 10.8127 19.8858 11.1898 19.6338 11.4812C19.3819 11.7726 19.0274 11.9558 18.644 11.993L18.5 12H13.5C13.1271 12 12.7676 11.8611 12.4916 11.6104C12.2156 11.3597 12.0428 11.0151 12.007 10.644L12 10.5V5.49999C12.0002 5.11477 12.1486 4.74439 12.4144 4.4656C12.6803 4.18681 13.0432 4.02098 13.4279 4.00246C13.8127 3.98395 14.1898 4.11418 14.4812 4.36616C14.7726 4.61815 14.9558 4.97257 14.993 5.35599L15 5.49999V6.87899L18.94 2.93899V2.93999Z"
                  fill="#E0E0E0"
                />
              </g>
              <defs>
                <clipPath id="clip0_60_8">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
        ) : (
          <div>
            <p>maximize</p>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
            >
              <g clipPath="url(#clip0_59_2)">
                <path
                  d="M8.94 12.94C9.2121 12.6691 9.5777 12.5129 9.96151 12.5035C10.3453 12.4941 10.7181 12.6323 11.0032 12.8895C11.2882 13.1467 11.4637 13.5034 11.4937 13.8862C11.5236 14.269 11.4056 14.6486 11.164 14.947L11.061 15.061L7.12 19H8.5C8.88522 19.0002 9.25559 19.1486 9.53439 19.4144C9.81318 19.6802 9.97901 20.0431 9.99752 20.4279C10.016 20.8127 9.88581 21.1898 9.63382 21.4812C9.38184 21.7726 9.02742 21.9558 8.644 21.993L8.5 22H3.5C3.12712 22 2.76761 21.8611 2.49158 21.6104C2.21555 21.3597 2.0428 21.0152 2.007 20.644L2 20.5V15.5C2.00019 15.1148 2.14858 14.7444 2.41441 14.4656C2.68024 14.1868 3.04314 14.021 3.42791 14.0025C3.81269 13.984 4.18983 14.1142 4.4812 14.3662C4.77257 14.6182 4.95583 14.9726 4.993 15.356L5 15.5V16.879L8.94 12.94ZM20.5 2C20.8729 2.00002 21.2324 2.13892 21.5084 2.38962C21.7844 2.64032 21.9572 2.98484 21.993 3.356L22 3.5V8.5C21.9998 8.88522 21.8514 9.25559 21.5856 9.53439C21.3198 9.81318 20.9569 9.97901 20.5721 9.99752C20.1873 10.016 19.8102 9.88581 19.5188 9.63382C19.2274 9.38184 19.0442 9.02742 19.007 8.644L19 8.5V7.121L15.06 11.061C14.7882 11.3338 14.4219 11.4916 14.037 11.5017C13.6521 11.5119 13.278 11.3736 12.9922 11.1156C12.7064 10.8576 12.5308 10.4995 12.5017 10.1155C12.4726 9.73158 12.5923 9.35114 12.836 9.053L12.939 8.939L16.88 5H15.5C15.1148 4.99981 14.7444 4.85142 14.4656 4.58559C14.1868 4.31976 14.021 3.95686 14.0025 3.57209C13.984 3.18731 14.1142 2.81017 14.3662 2.5188C14.6182 2.22743 14.9726 2.04417 15.356 2.007L15.5 2H20.5Z"
                  fill="#E0E0E0"
                />
              </g>
              <defs>
                <clipPath id="clip0_59_2">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
        )}
      </button>
      <div className={styles.content}>
        <div>{prefix}</div>
        {props.content.length > 320 && !selected
          ? `${props.content.slice(0, 320)}...`
          : props.content}
      </div>
      <div className={styles.footer}>
        <p className={styles.category}>{props.category}</p>
        {prefix ? (
          <button
            className={styles.button_no}
            onClick={noPrefix}
            title="Obriši prefiks"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="25"
              viewBox="0 0 25 25"
              fill="none"
            >
              <path
                d="M12.333 0C5.523 0 0 5.52 0 12.333C0 19.146 5.523 24.666 12.333 24.666C19.145 24.666 24.666 19.146 24.666 12.333C24.666 5.52 19.146 0 12.333 0ZM12.333 3C14.183 3 15.905 3.548 17.357 4.48L4.48 17.357C3.51364 15.8596 2.99976 14.1152 3 12.333C3 7.187 7.187 3 12.333 3ZM12.333 21.666C10.5509 21.6658 8.80661 21.1519 7.309 20.186L20.185 7.309C21.1514 8.80642 21.6652 10.5508 21.665 12.333C21.665 17.479 17.479 21.666 12.333 21.666Z"
                fill="#F8F8F8"
              />
            </svg>
          </button>
        ) : null}
        {!prefixOn ? (
          <button
            className={styles.button}
            onClick={prefixChange}
            title="Odaberi prefiks gospođa/gospodin"
          >
            <div className={styles.button_circle_male}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
              >
                <path
                  d="M9.39584 11.9167C9.39584 12.0671 9.36621 12.2161 9.30862 12.3552C9.25104 12.4942 9.16664 12.6205 9.06024 12.7269C8.95384 12.8333 8.82752 12.9177 8.6885 12.9753C8.54948 13.0329 8.40048 13.0625 8.25001 13.0625C7.94612 13.0625 7.65467 12.9418 7.43978 12.7269C7.2249 12.512 7.10418 12.2206 7.10418 11.9167C7.10418 11.6128 7.2249 11.3213 7.43978 11.1064C7.65467 10.8916 7.94612 10.7708 8.25001 10.7708C8.40048 10.7708 8.54948 10.8005 8.6885 10.8581C8.82752 10.9156 8.95384 11 9.06024 11.1064C9.16664 11.2128 9.25104 11.3392 9.30862 11.4782C9.36621 11.6172 9.39584 11.7662 9.39584 11.9167ZM13.75 10.7708C13.4461 10.7708 13.1547 10.8916 12.9398 11.1064C12.7249 11.3213 12.6042 11.6128 12.6042 11.9167C12.6042 12.2206 12.7249 12.512 12.9398 12.7269C13.1547 12.9418 13.4461 13.0625 13.75 13.0625C14.0539 13.0625 14.3454 12.9418 14.5602 12.7269C14.7751 12.512 14.8958 12.2206 14.8958 11.9167C14.8958 11.6128 14.7751 11.3213 14.5602 11.1064C14.3454 10.8916 14.0539 10.7708 13.75 10.7708ZM20.1667 11C20.1667 13.4311 19.2009 15.7627 17.4818 17.4818C15.7627 19.2009 13.4312 20.1667 11 20.1667C9.79623 20.1667 8.60423 19.9296 7.49208 19.4689C6.37993 19.0082 5.3694 18.333 4.5182 17.4818C2.79911 15.7627 1.83334 13.4311 1.83334 11C1.83334 8.56884 2.79911 6.23727 4.5182 4.51818C6.23728 2.7991 8.56886 1.83333 11 1.83333C12.2038 1.83333 13.3958 2.07043 14.5079 2.5311C15.6201 2.99177 16.6306 3.66698 17.4818 4.51818C18.333 5.36939 19.0082 6.37991 19.4689 7.49206C19.9296 8.60421 20.1667 9.79621 20.1667 11ZM9.77168 3.77666C11.055 5.90333 13.3833 7.33333 16.0417 7.33333C16.4633 7.33333 16.8758 7.2875 17.27 7.22333C15.9867 5.09666 13.6583 3.66666 11 3.66666C10.5783 3.66666 10.1658 3.71249 9.77168 3.77666ZM4.05168 8.68083C5.63347 7.7841 6.82827 6.33467 7.40668 4.61083C5.82489 5.50756 4.63009 6.95699 4.05168 8.68083ZM18.3333 11C18.3333 10.285 18.2233 9.5975 18.0308 8.94666C17.3892 9.08416 16.7292 9.16666 16.0417 9.16666C14.6791 9.16696 13.3337 8.86351 12.1032 8.27838C10.8727 7.69326 9.7881 6.84119 8.92834 5.78416C8.44702 6.94763 7.73154 7.99966 6.82637 8.87487C5.9212 9.75008 4.84568 10.4298 3.66668 10.8717V11C3.66668 15.0425 6.95751 18.3333 11 18.3333C15.0425 18.3333 18.3333 15.0425 18.3333 11Z"
                  fill="white"
                />
              </svg>
            </div>
          </button>
        ) : (
          <div>
            <button
              className={styles.button}
              onClick={prefixChange}
              title="Odaberi prefiks gospođa/gospodin"
            >
              <div className={styles.button_circle_female}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                >
                  <path
                    d="M9 1.5C4.875 1.5 1.5 4.875 1.5 9V16.5H16.5V9C16.5 4.875 13.125 1.5 9 1.5ZM9 3C11.175 3 13.08 4.17 14.13 5.91C13.8075 5.9625 13.47 6 13.125 6C10.95 6 9.045 4.83 7.995 3.09C8.3175 3.0375 8.655 3 9 3ZM6.06 3.7725C5.58676 5.18292 4.60919 6.36881 3.315 7.1025C3.78824 5.69208 4.76581 4.50619 6.06 3.7725ZM3 8.895C4.95 8.16 6.5175 6.6525 7.305 4.7325C8.00844 5.59734 8.89583 6.29449 9.9026 6.77323C10.9094 7.25196 12.0102 7.50024 13.125 7.5C13.6875 7.5 14.2275 7.4325 14.7525 7.32C14.91 7.8525 15 8.415 15 9C15 12.3075 12.3075 15 9 15C5.6925 15 3 12.3075 3 9V8.895ZM3 15V13.5C3.4275 14.0625 3.9375 14.5725 4.5 15H3ZM15 15H13.5C14.0625 14.5725 14.5725 14.0625 15 13.5V15ZM10.3125 9.75C10.3125 9.50136 10.4113 9.2629 10.5871 9.08709C10.7629 8.91127 11.0014 8.8125 11.25 8.8125C11.4986 8.8125 11.7371 8.91127 11.9129 9.08709C12.0887 9.2629 12.1875 9.50136 12.1875 9.75C12.1875 9.99864 12.0887 10.2371 11.9129 10.4129C11.7371 10.5887 11.4986 10.6875 11.25 10.6875C11.0014 10.6875 10.7629 10.5887 10.5871 10.4129C10.4113 10.2371 10.3125 9.99864 10.3125 9.75ZM5.8125 9.75C5.8125 9.50136 5.91127 9.2629 6.08709 9.08709C6.2629 8.91127 6.50136 8.8125 6.75 8.8125C6.99864 8.8125 7.2371 8.91127 7.41291 9.08709C7.58873 9.2629 7.6875 9.50136 7.6875 9.75C7.6875 9.99864 7.58873 10.2371 7.41291 10.4129C7.2371 10.5887 6.99864 10.6875 6.75 10.6875C6.50136 10.6875 6.2629 10.5887 6.08709 10.4129C5.91127 10.2371 5.8125 9.99864 5.8125 9.75Z"
                    fill="white"
                  />
                </svg>
              </div>
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default NoteCard;
